# Test sequence: C -> 1434 (valid move) -> 24 (extra digits) -> Enter -> Q
# This tests that extra digits beyond 4 continue rotating through the display
# Based on observed behavior from: printf 'C143424\rQ' | make play-6502
#
# Expected behavior:
# - First 4 digits (1434) build move e2-e4 and find piece 0E at square 14
# - 5th digit '2' starts new sequence: DIS = FF 43 42 (rotates, DIS1 reset to FF)
# - 6th digit '4' continues: DIS = FF 34 24 (keeps rotating)
# - Carriage return does nothing (no 4 digits completed for this sequence)

name: "Five+ Digit Input - Digit Rotation Continues"
description: "Tests that entering >4 digits keeps rotating display registers without executing move"

steps:
  - commands: "C"
    should_continue: true
    expected_display: |-
      MicroChess (c) 1996-2005 Peter Jennings, www.benlo.com
       00 01 02 03 04 05 06 07
      -------------------------
      |WR|WN|WB|WK|WQ|WB|WN|WR|00
      |WP|WP|WP|WP|WP|WP|WP|WP|10
      |  |**|  |**|  |**|  |**|20
      |**|  |**|  |**|  |**|  |30
      |  |**|  |**|  |**|  |**|40
      |**|  |**|  |**|  |**|  |50
      |BP|BP|BP|BP|BP|BP|BP|BP|60
      |BR|BN|BB|BK|BQ|BB|BN|BR|70
      -------------------------
       00 01 02 03 04 05 06 07
      CC CC CC

  # First 4 digits: 1434 (e2-e4)
  - commands: "1434"
    should_continue: true
    expected_display: |-
      MicroChess (c) 1996-2005 Peter Jennings, www.benlo.com
       00 01 02 03 04 05 06 07
      -------------------------
      |WR|WN|WB|WK|WQ|WB|WN|WR|00
      |WP|WP|WP|WP|WP|WP|WP|WP|10
      |  |**|  |**|  |**|  |**|20
      |**|  |**|  |**|  |**|  |30
      |  |**|  |**|  |**|  |**|40
      |**|  |**|  |**|  |**|  |50
      |BP|BP|BP|BP|BP|BP|BP|BP|60
      |BR|BN|BB|BK|BQ|BB|BN|BR|70
      -------------------------
       00 01 02 03 04 05 06 07
      0E 14 34

  # 5th digit: '2' - starts new sequence, DIS1 reset to FF
  - commands: "2"
    should_continue: true
    expected_display: |-
      MicroChess (c) 1996-2005 Peter Jennings, www.benlo.com
       00 01 02 03 04 05 06 07
      -------------------------
      |WR|WN|WB|WK|WQ|WB|WN|WR|00
      |WP|WP|WP|WP|WP|WP|WP|WP|10
      |  |**|  |**|  |**|  |**|20
      |**|  |**|  |**|  |**|  |30
      |  |**|  |**|  |**|  |**|40
      |**|  |**|  |**|  |**|  |50
      |BP|BP|BP|BP|BP|BP|BP|BP|60
      |BR|BN|BB|BK|BQ|BB|BN|BR|70
      -------------------------
       00 01 02 03 04 05 06 07
      FF 43 42

  # 6th digit: '4' - continues rotation
  - commands: "4"
    should_continue: true
    expected_display: |-
      MicroChess (c) 1996-2005 Peter Jennings, www.benlo.com
       00 01 02 03 04 05 06 07
      -------------------------
      |WR|WN|WB|WK|WQ|WB|WN|WR|00
      |WP|WP|WP|WP|WP|WP|WP|WP|10
      |  |**|  |**|  |**|  |**|20
      |**|  |**|  |**|  |**|  |30
      |  |**|  |**|  |**|  |**|40
      |**|  |**|  |**|  |**|  |50
      |BP|BP|BP|BP|BP|BP|BP|BP|60
      |BR|BN|BB|BK|BQ|BB|BN|BR|70
      -------------------------
       00 01 02 03 04 05 06 07
      FF 34 24

  # Carriage return: no move executed (board unchanged, DIS unchanged)
  - commands: "\r"
    should_continue: true
    expected_display: |-
      MicroChess (c) 1996-2005 Peter Jennings, www.benlo.com
       00 01 02 03 04 05 06 07
      -------------------------
      |WR|WN|WB|WK|WQ|WB|WN|WR|00
      |WP|WP|WP|WP|WP|WP|WP|WP|10
      |  |**|  |**|  |**|  |**|20
      |**|  |**|  |**|  |**|  |30
      |  |**|  |**|  |**|  |**|40
      |**|  |**|  |**|  |**|  |50
      |BP|BP|BP|BP|BP|BP|BP|BP|60
      |BR|BN|BB|BK|BQ|BB|BN|BR|70
      -------------------------
       00 01 02 03 04 05 06 07
      FF 34 24

  - commands: "Q"
    should_continue: false
    expected_display: ""
